<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,300;1,400;1,600;1,700;1,800&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Open Sans', sans-serif;
      }
    </style>
    <title>curbee</title>
  </head>
  <body style="text-align: center;">
      <h1>curbee</h1>
      <p>Image upload proof of concept</p>
      <br />
      <button id="upload_widget" class="cloudinary-button">Upload files</button>
      <br />
      <br />
      <img id="uploadedimage" src=""></img>
    <script
      src="https://upload-widget.cloudinary.com/global/all.js"
      type="text/javascript"
    ></script>

    <script type="text/javascript">
      const cloudName = "dkxdsqls8"; // replace with your own cloud name
      const uploadPreset = "pwrgzw90"; // replace with your own upload preset
      const curbeeId = Math.floor(Math.random() * 100);
      const myWidget = cloudinary.createUploadWidget(
        {
          cloudName: cloudName,
          uploadPreset: uploadPreset,
          public_id: `curbee${curbeeId}`

          // Remove the comments from the code below to add 
          // additional functionality.
          // Note that these are only a few examples, to see 
          // the full list of possible parameters that you 
          // can add see:
          //   https://cloudinary.com/documentation/upload_widget_reference

          // cropping: true, //add a cropping step
          // showAdvancedOptions: true,  //add advanced options (public_id and tag)
          // sources: [ "local", "url"], // restrict the upload sources to URL and local files
          // multiple: false,  //restrict upload to a single file
          // folder: "user_images", //upload files to the specified folder
          // tags: ["users", "profile"], //add the given tags to the uploaded files
          // context: {alt: "user_uploaded"}, //add the given context data to the uploaded files
          // clientAllowedFormats: ["images"], //restrict uploading to image files only
          // maxImageFileSize: 2000000,  //restrict file size to less than 2MB
          // maxImageWidth: 2000, //Scales the image down to a width of 2000 pixels before uploading
          // theme: "purple", //change to a purple theme
        },
        (error, result) => {
          if (!error && result && result.event === "success") {
            console.log("Done! Here is the image info: ", result.info);
            document.getElementById("uploadedimage").setAttribute("src", result.info.secure_url);
          }
        }
      );

      document.getElementById("upload_widget").addEventListener(
        "click",
        function () {
          myWidget.open();
        },
        false
      );
    </script>

  </body>
</html>
